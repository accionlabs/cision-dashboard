<div class="geographic-widget">
  <div class="widget-header">
    <h3>Répartition géographique</h3>
    <div class="widget-actions">
      <button class="info-btn">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <path d="M12 16v-4"></path>
          <path d="M12 8h.01"></path>
        </svg>
      </button>
    </div>
  </div>

  <div class="chart-container">
    <div class="regions-visualization">
      <div class="regions-map">
        <div id="map" class="leaflet-map"></div>
      </div>

      <div class="regions-list">
        <div class="region-row" *ngFor="let region of regions; trackBy: trackByRegion">
          <div class="region-info">
            <span class="region-name">{{region.name}}</span>
            <span class="region-value">{{region.value}} mentions</span>
          </div>
          <div class="region-bar">
            <div class="bar-fill"
                 [style.width]="getBarWidth(region.value)"
                 [style.background-color]="getIntensityColor(region.intensity)">
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="legend">
      <div class="legend-item">
        <div class="legend-gradient"></div>
        <div class="legend-labels">
          <span>Faible</span>
          <span>Fort</span>
        </div>
      </div>
    </div>
  </div>
</div>